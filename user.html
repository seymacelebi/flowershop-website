<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alışveriş Sepeti</title>
    <link rel="stylesheet" href="css/style.css" />
    <!-- font awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />

    <!-- custom css link -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <header>
      <input type="checkbox" name="" id="toggler" />
      <label for="toggler" class="fas fa-bars"></label>
      <a href="/index.html#home" class="logo">flower<span>.</span></a>

      <nav class="navbar">
        <a href="/index.html#home">Home</a>
        <a href="/index.html#about">About</a>
        <a href="/index.html#products">Products</a>
        <a href="/index.html#review">Review</a>
        <a href="/index.html#contact">Contact</a>
      </nav>

      <div class="icons">
        <a href="#" class="fas fa-heart"></a>
        <a href="cart.html" class="fas fa-shopping-cart">
          <span id="cart-count" class="total-qty"></span>
        </a>
        <a href="#" class="fas fa-user"></a>
      </div>
    </header>

    <div class="container">
      <aside class="sidebar">
        <ul>
          <li>
            <a href="#" onclick="loadContent('My Account Settings', this)"
              ><i class="fa-solid fa-user"></i> My Account Settings</a
            >
          </li>
          <li>
            <a href="#" onclick="loadContent('My Orders', this)"
              ><i class="fa-solid fa-box"></i> My Orders</a
            >
          </li>
          <li>
            <a href="#" onclick="loadContent('My Return Requests', this)"
              ><i class="fa-solid fa-undo"></i> My Return Requests</a
            >
          </li>
          <li>
            <a href="cart.html" onclick="loadContent('My Shopping Cart', this)"
              ><i class="fa-solid fa-shopping-cart"></i> My Shopping Cart</a
            >
          </li>
          <li>
            <a
              href="favoriteProduct.html"
              onclick="loadContent('Favorites', this)"
              ><i class="fa-solid fa-heart"></i> Favorites</a
            >
          </li>
          <li>
            <a href="#" onclick="loadContent('My Collection', this)"
              ><i class="fa-solid fa-book"></i> My Collection</a
            >
          </li>
          <li>
            <a href="#" onclick="loadContent('My Comments', this)"
              ><i class="fa-solid fa-comment"></i> My Comments</a
            >
          </li>
          <li>
            <a
              href="#"
              onclick="loadContent('Money Points / Gift Certificate', this)"
              ><i class="fa-solid fa-gift"></i> Money Points / Gift
              Certificate</a
            >
          </li>
          <li>
            <a href="#" onclick="loadContent('My Support Requests', this)"
              ><i class="fa-solid fa-life-ring"></i> My Support Requests</a
            >
          </li>
          <li>
            <a
              href="#"
              id="logout-button"
              onclick="loadContent('Log out', this)"
              ><i class="fa-solid fa-sign-out-alt"></i> Log out</a
            >
          </li>
        </ul>
      </aside>
      <main class="main-content" id="main-content"></main>
    </div>
    <script src="js/script.js" defer></script>
  </body>
</html>

<script>
  function loadContent(content, element) {
    const mainContent = document.getElementById("main-content");

    // Map content titles to their respective HTML file paths
    const contentFiles = {
      "My Orders": "usersdetails/myOrders.html",
      "My Account Settings": "usersdetails/accountSettings.html",
      "My Return Requests": "usersdetails/returnRequests.html",
      "My Shopping Cart": "usersdetails/cart.html",
      Favorites: "usersdetails/favoriteProduct.html",
      "My Collection": "usersdetails/collection.html",
      "My Comments": "usersdetails/comments.html",
      "Money Points / Gift Certificate": "usersdetails/giftCertificate.html",
      "My Support Requests": "usersdetails/supportRequests.html",
      "Log out": "usersdetails/logout.html",
    };

    // Fetch and load the corresponding HTML file
    const filePath = contentFiles[content];
    if (filePath) {
      fetch(filePath)
        .then((response) => {
          if (!response.ok) {
            throw new Error(`Failed to load ${filePath}`);
          }
          return response.text();
        })
        .then((data) => {
          mainContent.innerHTML = `<h1>${content}</h1>${data}`;
        })
        .catch((error) => {
          console.error(error);
          mainContent.innerHTML = `<h1>Error</h1><p>Could not load content for "${content}".</p>`;
        });
    } else {
      mainContent.innerHTML = `<h1>${content}</h1><p>Content for "${content}" goes here.</p>`;
    }

    // Remove 'active' class from the previous active link
    const activeLink = document.querySelector(".sidebar a.active");
    if (activeLink) {
      activeLink.classList.remove("active");
    }

    // Add 'active' class to the clicked link
    element.classList.add("active");
  }

  // Sayfa yüklendiğinde ilk içeriği göster
  window.onload = function () {
    const firstLink = document.querySelector(".sidebar a");
    loadContent("My Account Settings", firstLink);
  };

  // LocalStorage'dan loggedInUser nesnesini alıyoruz
  let loggedInUser = JSON.parse(localStorage.getItem("loggedInUser")) || {};

  // loggedInUser içindeki fullName değerini h1 içine ekliyoruz
  document.getElementById("user-info").textContent = `HELLO ${
    loggedInUser.fullName || "Guest"
  }`;

  // Logout function to remove the user data and redirect
  function logout() {
    localStorage.removeItem("loggedInUser"); // Remove the logged-in user from localStorage
    alert("You have been logged out.");
    window.location.href = "index.html"; // Redirect back to login page or home page
  }

  // Add an event listener to the logout button
  document.addEventListener("DOMContentLoaded", function () {
    const logoutButton = document.getElementById("logout-button");
    if (logoutButton) {
      console.log(logoutButton, "aaa");
      logoutButton.addEventListener("click", logout);
    }
  });
</script>

<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  html,
  body {
    height: 100%;
    width: 100%;
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
  }

  body {
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .container {
    display: flex;
    width: 100%;
    height: 80%;
    max-width: 100%;
    background-color: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
  }

  .sidebar {
    width: 20%;
    background-color: #ff33991a;
    padding: 30px;
    height: 100%;
    overflow-y: auto;
  }

  .sidebar ul {
    list-style-type: none;
    padding: 0;
  }
  .sidebar li {
    margin-bottom: 45px; /* Linkler arasındaki boşluk */
  }
  .sidebar a {
    display: block; /* Her bağlantıyı blok eleman yapar */
    text-decoration: none;
    color: #333;
    padding: 5px 0; /* Üst ve alt boşluk sağlar */
    margin-bottom: 10px; /* Bağlantılar arasında boşluk bırakır */
    border-radius: 5px; /* Kenarları yuvarlatmak için */
    transition: background-color 0.3s;
  }
  .sidebar a.active {
    color: #007bff; /* Tıklanan link rengi */
    font-weight: bold;
    background-color: #e8f0fe;
  }
  .sidebar ul li {
    margin: 15px;
    font-size: 20px;
    font-family: Georgia, "Times New Roman", Times, serif;
  }
  .sidebar ul li {
    display: flex;
  }

  .sidebar ul li a {
    text-decoration: none;
    color: #333;
    font-weight: bold;
  }

  .main-content {
    width: 80%;
    padding: 20px;
    overflow-y: auto;
    background-color: rgb(248, 219, 248);
  }

  .main-content h1 {
    font-size: 28px; /* Adjusted font size */
    font-family: "Times New Roman", Times, serif;
  }

  .main-content p {
    font-family: "Times New Roman", Times, serif;
    font-size: 20px;
  }

  h1 {
    font-size: 24px;
    color: #333;
  }

  .grid-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    margin-top: 20px;
    height: calc(100% - 100px);
  }

  .grid-item {
    background-color: thistle;
    border: 1px solid #ddd;
    border-radius: 8px;
    text-align: center;
    padding: 20px;
    font-weight: bold;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 150px;
  }

  .grid-item a {
    text-decoration: none;
    color: #333;
  }

  .grid-item:hover {
    background-color: #e1e1e1;
  }
</style>
