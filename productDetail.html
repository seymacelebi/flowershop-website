<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="“viewport”"
      content="“width"
      ="device-width,"
      initial-scale="1.0”"
    />
    <title>complete responsive flower website design</title>

    <!-- font awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <!-- toast -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/toastify-js"
    ></script>

    <!-- custom css link -->
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- header section -->
    <header>
      <input type="checkbox" name="" id="toggler" />
      <label for="toggler" class="fas fa-bars"></label>
      <a href="/index.html#home" class="logo">flower<span>.</span></a>

      <nav class="navbar">
        <a href="/index.html#home">Home</a>
        <a href="/index.html#about">About</a>
        <a href="/index.html#products">Products</a>
        <a href="/index.html#review">Review</a>
        <a href="/index.html#contact">Contact</a>
      </nav>

      <div class="icons">
        <a href="favoriteProduct.html" class="fas fa-heart"></a>
        <a href="cart.html" class="fas fa-shopping-cart">
          <span id="cart-count" class="total-qty"></span>
          <!-- Sepet sayısı burada gösterilecek -->
        </a>
        <a href="login.html" class="fas fa-user"></a>
      </div>
    </header>

    <div class="container">
      <aside class="sidebar">
        <img id="main-image" alt="Main Image" />
      </aside>

      <!-- Thumbnails for extra images -->
      <div class="thumbnails">
        <img class="thumbnail" alt="Extra Image 1" />
        <img class="thumbnail" src="images/flower4.jpg" alt="Extra Image 2" />
      </div>

      <main class="main-content">
        <br /><br /><br /><br />

        <div class="product-price">
          <h1>Sun Flower</h1>
          <div>
            <span class="current-price">1.350,00 TL</span>
            <span class="original-price"><s>1.550,00 TL</s></span>
            <!-- Yıldız simgesi -->
            <span class="rating-stars">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star-half-alt"></i>
              <!-- Yarım yıldız örneği -->
            </span>
          </div>
          <br />
          <span class="discount">%13 İndirim</span>
        </div>

        <div class="addressText">
          <i class="fas fa-building"></i>
          <input
            type="text"
            placeholder="Select the address you want to send to"
            class="inputA"
          />
        </div>

        <div class="textRandom">
          <i class="fa-solid fa-ticket"></i>
          <span>Up to 6 Months Installment</span>
          <i class="fa-solid fa-truck"></i>
          <span>Same Day Delivery Every Day</span>
          <i class="fa-solid fa-check"></i>
          <span>Free Delivery</span>
        </div>

        <div class="buttons">
          <button class="add-to-cart btn" onClick="addToCart(this)" >Add to Cart</button>
          <a href="favoriteProduct.html"  class="fas fa-heart"></a>
        </div>

        <div class="text-shippment">
          <h3>Will be shipped on October 28th at the latest.</h3>
        </div>

        <div class="text-desc">
          <h3>Will be shipped on October 28th at the latest.</h3>
        </div>

        <div class="comments-section">
          <h3>Customer Reviews</h3>
        </div>
      </main>

      <hr />
    </div>

    <script src="js/script.js"></script>
  </body>
</html>

<script>
  const allProducts = JSON.parse(localStorage.getItem("productInStore"));
  const urlParams = new URLSearchParams(window.location.search);

  const mainImage = document.getElementById("main-image");
  const thumbnailsContainer = document.querySelector(".thumbnails");
  const productId = urlParams.get("id");
  const product = allProducts.find((p) => p.id === parseInt(productId));

  // Sepete ürün eklemek için addToCart fonksiyonu
function addToCart(element) {
  // Sepetteki ürünleri al
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  
  console.log(cart, "cartt")

  // Sepette aynı ürün var mı kontrol et
  const existingProduct = cart.find((p) => p.id === product.id);
  if (existingProduct) {
    // Varsa miktarını arttır
    existingProduct.quantity += 1;
  } else {
    // Yoksa yeni ürün olarak ekle
    cart.push({
      ...product, // product nesnesini ekliyoruz
      quantity: 1 // Başlangıç miktarı olarak 1 veriyoruz
    });
  }

  // Güncellenmiş sepeti localStorage'da sakla
  localStorage.setItem("cart", JSON.stringify(cart));

  // Sepet sayacını güncelle
  updateCartCount();
}

// Sepetteki ürün sayısını güncellemek için bir fonksiyon
function updateCartCount() {
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const totalQuantity = cart.reduce((sum, item) => sum + item.quantity, 0);
  document.getElementById("cart-count").textContent = totalQuantity;
}

// Sayfa yüklendiğinde sepet sayısını güncelle
updateCartCount();









  



  // Set the main image initially
  mainImage.src = product.imageSrc;

  // Clear any existing thumbnails in the container
  thumbnailsContainer.innerHTML = "";

  // Generate thumbnail images from extraImages array and add event listeners
  product.extraImages.forEach((imageSrc) => {
    const img = document.createElement("img");
    img.className = "thumbnail";
    img.src = imageSrc;
    img.alt = "Extra Image";

    // Add click event to update the main image when thumbnail is clicked
    img.addEventListener("click", () => {
      mainImage.src = imageSrc;
    });

    thumbnailsContainer.appendChild(img);
  });

  // Check if the main image and thumbnails are set up correctly
  console.log(mainImage, thumbnailsContainer);

  document.addEventListener("DOMContentLoaded", () => {
    // URL parametresinden id'yi al
    const productId = urlParams.get("id");
    // Tüm ürünleri `localStorage`'dan al

    if (productId && allProducts) {
      // ID'si ile ürünü bul
      const product = allProducts.find((p) => p.id === parseInt(productId));
      displayProductDetails(product); // Ürün bilgilerini göster
      console.log(product, "şşş");
    }
  });

  function displayProductDetails(product) {
    console.log(product, "qqere");

    // Ürün adı
    document.querySelector(".product-price h1").innerText = product.title;

    // Güncel fiyat ve orijinal fiyat
    document.querySelector(".current-price").innerText = `${product.price} $`;
    document.querySelector(
      ".original-price"
    ).innerHTML = `<s>${product.originalPrice} $</s>`;

    // İndirim oranı
    document.querySelector(".discount").innerText = product.discount;

    // Ana ürün görseli
    document.querySelector(".sidebar img").src = product.imageSrc;

    // Açıklama
    document.querySelector(".text-desc").innerText = product.description;

    // Yorumlar için HTML
    const reviewContainer = document.querySelector(".review-container"); // Yorumlar için bir div'e ihtiyacınız olacak
    //reviewContainer.innerHTML = ""; // Mevcut yorumları temizle

    // Örneğin, yorumları eklemek için 'comments-section' öğesini seçin
    const commentsSection = document.querySelector(".comments-section");

    // Her bir yorumu eklemek için döngü
    product.reviews.forEach((review) => {
      // Yeni yorum öğesi oluşturun
      const reviewElement = document.createElement("div");
      reviewElement.classList.add("comment");

      // Yorum içeriğini ekleyin
      reviewElement.innerHTML = `
    <p><strong>${review.user}</strong> - ${review.comment}</p>
    <span class="rating-stars">
      ${Array(review.rating).fill('<i class="fas fa-star"></i>').join("")}
      ${review.rating % 1 !== 0 ? '<i class="fas fa-star-half-alt"></i>' : ""}
    </span>
  `;

      // Yorum öğesini 'comments-section' içine ekleyin
      commentsSection.appendChild(reviewElement);
    });
  }
</script>

<style>
  html,
  body {
    height: 100%;
    width: 100%;
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    overflow: hidden; /* Scroll'u kapatır */
  }

  .container {
    display: flex;
    width: 100%;
    height: 100vh; /* Tam ekran yapar */
    background-color: white;
  }

  /* Yan menü stili */
  /* Sidebar styling for the main image */
  .sidebar {
    width: 40%;
    padding: 10px;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow-y: hidden;
  }

  .sidebar img {
    margin-top: 100px;
    width: 100%;
    height: auto;
    object-fit: contain;
    max-height: 100%;
  }

  /* Thumbnails styling */
  .thumbnails {
    margin-top: 90px;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .thumbnail {
    width: 80px;
    cursor: pointer;
    border: 2px solid #ddd;
    padding: 2px;
    transition: border 0.3s;
  }

  .thumbnail:hover {
    border-color: #333;
  }
  .main-content {
    width: 60%; /* Ana içerik genişliği */
    padding: 90px;
    height: 100%; /* Yüksekliği tam ekran */
  }

  .product-price {
    background-color: #ff33991a;
    margin-top: 20px;
    width: 91vh;
    border-radius: 0.5rem;
    height: 20vh;
  }
  .product-price h1 {
    margin-left: 15px;
    margin-bottom: 60px; /* H1 ve fiyat arasında boşluk */
    margin-top: 30px;
  }
  .product-price .current-price {
    color: red;
    margin-left: 10px;
    font-size: 24px;
    font-weight: bold;
  }

  .product-price .discount {
    font-size: 15px;
    font-weight: bold;
    margin-left: 10px;
  }

  .product-price .original-price {
    color: gray;
    font-size: 24px;
    text-decoration: line-through;
    margin-left: 10px;
  }
  .rating-stars {
    margin-left: 55%; /* Fiyatlar ile yıldızlar arasında boşluk */
  }

  .rating-stars i {
    color: #ffd700; /* Yıldızların rengi (altın) */
    margin-left: 5px; /* Yıldızlar arasında boşluk */
    font-size: 14px; /* Yıldız boyutu */
  }
  .buttons {
    justify-content: center; /* Ortalar */
  }

  .add-to-cart {
    margin-top: 30px;
    margin-right: 8px;
    background-color: black;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    width: 85%;
  }

  .add-to-cart:hover {
    background-color: darkgray;
  }
  .text-shippment {
    margin-top: 20px;
    padding-top: 30px;
    padding-bottom: 30px; /* Aşağıdan boşluk için */
    padding-left: 7px;
    background-color: #ff33991a;
    width: 90vh;
    border-radius: 2rem;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  .text-shippment h3 {
    margin: 0;
    padding: 0;
  }

  .text-desc {
    margin-top: 20px;
    padding-top: 30px;
    padding-bottom: 30px; /* Aşağıdan boşluk için */
    padding-left: 7px;
    background-color: #fff;
    width: 90vh;
    border-radius: 2rem;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  .text-desc h3 {
    margin: 0;
    padding: 0;
    font-size: 1.5rem;
  }

  .inputA {
    margin-top: 20px;
    width: 84%; /* Genişletmek için */
    background-color: white; /* Arka plan rengi */
    padding: 10px; /* İç boşluk */
    border: 1px solid #ccc; /* Kenarlık */
    border-radius: 5px; /* Kenar yuvarlama */
    font-size: 16px; /* Yazı boyutu */
  }

  .addressText {
    position: relative;
    width: 100%;
  }

  .addressText i {
    padding-top: 18px;
    position: absolute;
    left: 10px; /* Simgeyi input'un soluna yerleştir */
    top: 50%;
    transform: translateY(-50%); /* Simgeyi dikey ortala */
    color: #999; /* Simge rengi */
    font-size: 18px; /* Simge boyutu */
    border-radius: 5rem;
  }

  .inputA {
    width: 85%;
    padding: 10px 10px 10px 40px; /* Sol tarafta simge için boşluk */
    background-color: #f0f0f0; /* Arka plan rengi */
  }

  .fas.fa-heart {
    font-size: 24px; /* İstediğiniz boyutu girin */
  }

  .textRandom {
    padding-top: 25px;
    padding-left: 5px;
    display: flex;
    gap: 15px; /* İkonlar ve yazılar arasındaki boşluk */
    align-items: center;
  }

  .textRandom i {
    font-size: 1.5rem; /* İkonların boyutunu büyüt */
    color: #333; /* İkonların rengini ayarla */
  }

  .textRandom span {
    font-size: 1.2rem; /* Yazı boyutunu büyüt */
    font-weight: bold; /* Yazıyı kalın yap */
    color: #333; /* Yazı rengini ayarla */
  }

  .comments-section {
    border: 1px solid #ddd;
    padding: 20px;
    border-radius: 5px;
    background-color: #f9f9f9;
    width: 85%;
    margin-bottom: 30px;
    height: auto;
    overflow: auto;
  }

  .comments-section h3 {
    font-size: 18px;
    margin-bottom: 15px;
  }

  .comment {
    padding: 10px 0;
    border-bottom: 1px solid #eee;
  }

  .comment:last-child {
    border-bottom: none;
  }

  .comment-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 5px;
  }

  .comment-header p {
    margin: 0;
    font-size: 14px;
    color: #555;
  }

  .comment-content {
    font-size: 14px;
    color: #333;
    margin: 0; /* Ensure no extra margin is added */
  }

  .rating-stars {
    color: #f5c518;
  }

  .comment p {
    margin: 5px 0;
    color: #333;
  }

  .helpful-btn {
    background-color: #f0f0f0;
    border: 1px solid #ddd;
    border-radius: 5px;
    color: #666;
    font-size: 14px;
    cursor: pointer;
    padding: 5px 10px;
    margin-top: 5px;
  }

  .helpful-btn:hover {
    background-color: #e0e0e0;
  }
  @media (max-width: 768px) {
    .comments-section {
      width: 90%;
    }
  }
</style>
